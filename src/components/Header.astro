---
import ThemeToggle from "./ThemeToggle.astro";

const pathname = Astro.url.pathname;
const parts = pathname.split("/").filter(Boolean);

// Breadcrumb logic
const breadcrumbs = [{ label: "na", href: "/" }];

if (parts.length > 0) {
    if (parts[0] === "works") {
        breadcrumbs.push({ label: "Works", href: "/#work" }); // Link back to works section on home

        if (parts.length > 1) {
            // Project Title (Format nicely)?
            // We don't have the title easily here without passing props,
            // but we can just use the slug or let Layout pass it.
            // For now, let's keep it simple: "na / Works / [Slug]"
            // Or better: Let Layout pass the current page title?
            // Actually, for "Works", using the slug is cleaner for now.
            breadcrumbs.push({ label: parts[1].replace(/-/g, " "), href: "#" });
        }
    } else {
        breadcrumbs.push({ label: parts[0], href: pathname });
    }
}
---

<header class="bento-header">
    <div class="header-left">
        {
            breadcrumbs.map((crumb, index) => (
                <>
                    {index > 0 && <span class="separator">/</span>}
                    <a
                        href={crumb.href}
                        class={`crumb ${index === 0 ? "logo" : ""} ${index === breadcrumbs.length - 1 ? "active" : ""}`}
                    >
                        {crumb.label}
                    </a>
                </>
            ))
        }
    </div>

    <div class="header-right">
        <ThemeToggle />
    </div>
</header>

<style>
    .bento-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem var(--space-md);
        background: var(--bg-primary);
        border-bottom: 1px solid var(--border-subtle);
        position: sticky;
        top: 0;
        z-index: 100;
        /* The "Bento" feel comes from the bar being defined */
    }

    .header-left {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .separator {
        color: var(--text-muted);
        font-size: 0.9rem;
    }

    .crumb {
        font-size: 0.95rem;
        color: var(--text-secondary);
        font-weight: 500;
        text-transform: capitalize;
        text-decoration: none;
        transition: color 0.2s ease;
    }

    .crumb:hover {
        color: var(--text-primary);
    }

    .crumb.logo {
        font-weight: 800;
        color: var(--text-primary);
        font-family: var(--font-mono); /* Technical feel */
    }

    .crumb.active {
        color: var(--text-primary); /* Highlight current page */
        pointer-events: none; /* Disable click on current */
    }

    .header-right {
        display: flex;
        gap: 1rem;
    }
</style>
